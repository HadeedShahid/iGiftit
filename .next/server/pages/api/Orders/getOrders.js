"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/Orders/getOrders";
exports.ids = ["pages/api/Orders/getOrders"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "(api)/./lib/prisma/index.js":
/*!*****************************!*\
  !*** ./lib/prisma/index.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hL2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQUU5QyxNQUFNQyxTQUFTLElBQUlELHdEQUFZQTtBQUUvQixpRUFBZUMsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2lnaWZ0aXQvLi9saWIvcHJpc21hL2luZGV4LmpzPzM5Y2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XHJcblxyXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KClcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHByaXNtYTsiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwicHJpc21hIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/prisma/index.js\n");

/***/ }),

/***/ "(api)/./lib/prisma/orders.js":
/*!******************************!*\
  !*** ./lib/prisma/orders.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addOrder\": () => (/* binding */ addOrder),\n/* harmony export */   \"getOrders\": () => (/* binding */ getOrders)\n/* harmony export */ });\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! . */ \"(api)/./lib/prisma/index.js\");\n\nasync function getOrders(email) {\n    try {\n        // console.log(\"in create user,\",user)\n        const orders = await ___WEBPACK_IMPORTED_MODULE_0__[\"default\"].order.findMany({\n            where: {\n                userEmail: email\n            }\n        });\n        console.log(\"old orders:\", orders);\n        const newOrders = await Promise.all(orders.map(async (order)=>{\n            // console.log(\"testing\",)\n            const jsonItems = await JSON.parse(order.items);\n            console.log(\"json items\", jsonItems);\n            // console.log(typeof order.items)\n            // console.log(typeof order.items)\n            return {\n                ...order,\n                items: jsonItems\n            };\n        // return order\n        }));\n        // console.log(\"new orders:\", JSON.stringify(newOrders));\n        return newOrders;\n    } catch (error) {\n        console.log(error);\n        console.log(\"*****Error in create user prisma/user.js*****\");\n    }\n}\nasync function addOrder(order) {\n    console.log(\"**********\", typeof order);\n    try {\n        const newOrder = await ___WEBPACK_IMPORTED_MODULE_0__[\"default\"].order.create({\n            data: order\n        });\n        return newOrder;\n    } catch (error) {\n        console.log(\"*****Error in get user by email prisma/user.js*****\");\n        console.log(error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hL29yZGVycy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUI7QUFJaEIsZUFBZUMsVUFBVUMsS0FBSyxFQUFDO0lBQ2xDLElBQUk7UUFDQSxzQ0FBc0M7UUFDdEMsTUFBTUMsU0FBVSxNQUFNSCx3REFBcUIsQ0FBQztZQUN4Q00sT0FBTztnQkFDSEMsV0FBV0w7WUFDZjtRQUNKO1FBQ0FNLFFBQVFDLEdBQUcsQ0FBQyxlQUFlTjtRQUUzQixNQUFNTyxZQUFZLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ1QsT0FBT1UsR0FBRyxDQUFDLE9BQU9ULFFBQVE7WUFDMUQsMEJBQTBCO1lBQzFCLE1BQU1VLFlBQWEsTUFBTUMsS0FBS0MsS0FBSyxDQUFDWixNQUFNYSxLQUFLO1lBQy9DVCxRQUFRQyxHQUFHLENBQUMsY0FBYUs7WUFDekIsa0NBQWtDO1lBQ2xDLGtDQUFrQztZQUNsQyxPQUFPO2dCQUFDLEdBQUdWLEtBQUs7Z0JBQUNhLE9BQU1IO1lBQVM7UUFDaEMsZUFBZTtRQUNuQjtRQUVBLHlEQUF5RDtRQUN6RCxPQUFPSjtJQUNYLEVBQUUsT0FBT1EsT0FBTztRQUNaVixRQUFRQyxHQUFHLENBQUNTO1FBQ1pWLFFBQVFDLEdBQUcsQ0FBQztJQUNoQjtBQUNKLENBQUM7QUFFTSxlQUFlVSxTQUFTZixLQUFLLEVBQUM7SUFDakNJLFFBQVFDLEdBQUcsQ0FBQyxjQUFhLE9BQU9MO0lBQ2hDLElBQUk7UUFDQSxNQUFNZ0IsV0FBVyxNQUFNcEIsc0RBQW1CLENBQUM7WUFBQ3NCLE1BQUtsQjtRQUFLO1FBQ3RELE9BQU9nQjtJQUVYLEVBQUUsT0FBT0YsT0FBTztRQUNaVixRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDUztJQUNoQjtBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZ2lmdGl0Ly4vbGliL3ByaXNtYS9vcmRlcnMuanM/YjdmMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHJpc21hIGZyb20gXCIuXCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcmRlcnMoZW1haWwpe1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImluIGNyZWF0ZSB1c2VyLFwiLHVzZXIpXHJcbiAgICAgICAgY29uc3Qgb3JkZXJzID0gKGF3YWl0IHByaXNtYS5vcmRlci5maW5kTWFueSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGVtYWlsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJvbGQgb3JkZXJzOlwiLCBvcmRlcnMpO1xyXG5cclxuICAgICAgICBjb25zdCBuZXdPcmRlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChvcmRlcnMubWFwKGFzeW5jIChvcmRlcik9PntcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0ZXN0aW5nXCIsKVxyXG4gICAgICAgICAgICBjb25zdCBqc29uSXRlbXMgPSAgYXdhaXQgSlNPTi5wYXJzZShvcmRlci5pdGVtcylcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJqc29uIGl0ZW1zXCIsanNvbkl0ZW1zKVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0eXBlb2Ygb3JkZXIuaXRlbXMpXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHR5cGVvZiBvcmRlci5pdGVtcylcclxuICAgICAgICAgICAgcmV0dXJuIHsuLi5vcmRlcixpdGVtczpqc29uSXRlbXN9XHJcbiAgICAgICAgICAgIC8vIHJldHVybiBvcmRlclxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJuZXcgb3JkZXJzOlwiLCBKU09OLnN0cmluZ2lmeShuZXdPcmRlcnMpKTtcclxuICAgICAgICByZXR1cm4gbmV3T3JkZXJzXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiKioqKipFcnJvciBpbiBjcmVhdGUgdXNlciBwcmlzbWEvdXNlci5qcyoqKioqXCIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRPcmRlcihvcmRlcil7XHJcbiAgICBjb25zb2xlLmxvZyhcIioqKioqKioqKipcIix0eXBlb2Ygb3JkZXIpXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IG5ld09yZGVyID0gYXdhaXQgcHJpc21hLm9yZGVyLmNyZWF0ZSh7ZGF0YTpvcmRlcn0pXHJcbiAgICAgICAgcmV0dXJuIG5ld09yZGVyO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCIqKioqKkVycm9yIGluIGdldCB1c2VyIGJ5IGVtYWlsIHByaXNtYS91c2VyLmpzKioqKipcIilcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJnZXRPcmRlcnMiLCJlbWFpbCIsIm9yZGVycyIsIm9yZGVyIiwiZmluZE1hbnkiLCJ3aGVyZSIsInVzZXJFbWFpbCIsImNvbnNvbGUiLCJsb2ciLCJuZXdPcmRlcnMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwianNvbkl0ZW1zIiwiSlNPTiIsInBhcnNlIiwiaXRlbXMiLCJlcnJvciIsImFkZE9yZGVyIiwibmV3T3JkZXIiLCJjcmVhdGUiLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/prisma/orders.js\n");

/***/ }),

/***/ "(api)/./src/pages/api/Orders/getOrders.js":
/*!*******************************************!*\
  !*** ./src/pages/api/Orders/getOrders.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var lib_prisma_orders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib/prisma/orders */ \"(api)/./lib/prisma/orders.js\");\n\n/*\r\ninput:\r\n{\"orderToAdd\" : {\r\n    \"userEmail\":\"bscs19041@itu.edu.pk\",\r\n    \"status\": \"on da way\",\r\n    \"amount\": \"20000\",\r\n    \"date\":\"12-4-22\",\r\n    \"wrap\":true,\r\n    \"card\":true,\r\n    \"items\": [{\"name\":\"Air King\",\"QTY\":\"1\",\"Color\":\"Blue\"}]\r\n}}\r\n*/ async function handler(req, res) {\n    console.log(\"in handler\");\n    if (req.method === \"POST\") {\n        if (!req.body) {\n            return res.status(404).json({\n                error: \"No data\"\n            });\n        }\n        const { email  } = req.body;\n        const newOrder = await (0,lib_prisma_orders__WEBPACK_IMPORTED_MODULE_0__.getOrders)(email);\n        if (!newOrder) {\n            res.status(500).json({\n                message: \"Error in getting all orders\"\n            });\n            throw new Error(\"Error in getting all orders\");\n        }\n        console.log(\"new Order,\", JSON.stringify(newOrder));\n        res.status(200).json({\n            \"orders\": newOrder\n        });\n    } else {\n        res.status(500).json({\n            message: \"Method Error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL09yZGVycy9nZXRPcmRlcnMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEM7QUFDOUM7Ozs7Ozs7Ozs7O0FBV0EsR0FDZSxlQUFlQyxRQUFRQyxHQUFHLEVBQUNDLEdBQUcsRUFBQztJQUMxQ0MsUUFBUUMsR0FBRyxDQUFDO0lBQ1osSUFBSUgsSUFBSUksTUFBTSxLQUFHLFFBQU87UUFDcEIsSUFBRyxDQUFDSixJQUFJSyxJQUFJLEVBQUM7WUFBQyxPQUFPSixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFDQyxPQUFNO1lBQVM7UUFBRSxDQUFDO1FBQzdELE1BQUssRUFBQ0MsTUFBSyxFQUFDLEdBQUdULElBQUlLLElBQUk7UUFFdkIsTUFBTUssV0FBVyxNQUFNWiw0REFBU0EsQ0FBQ1c7UUFFakMsSUFBSSxDQUFDQyxVQUFTO1lBQ1ZULElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUNJLFNBQVE7WUFBNkI7WUFDM0QsTUFBTSxJQUFJQyxNQUFNLCtCQUErQjtRQUNuRCxDQUFDO1FBQ0RWLFFBQVFDLEdBQUcsQ0FBQyxjQUFhVSxLQUFLQyxTQUFTLENBQUNKO1FBRXhDVCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUMsVUFBU0c7UUFBUTtJQUczQyxPQUNJO1FBQ0RULElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBQ0ksU0FBUTtRQUFjO0lBRS9DLENBQUM7QUFDTCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaWdpZnRpdC8uL3NyYy9wYWdlcy9hcGkvT3JkZXJzL2dldE9yZGVycy5qcz82M2YxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE9yZGVycyB9IGZyb20gXCJsaWIvcHJpc21hL29yZGVyc1wiO1xyXG4vKlxyXG5pbnB1dDpcclxue1wib3JkZXJUb0FkZFwiIDoge1xyXG4gICAgXCJ1c2VyRW1haWxcIjpcImJzY3MxOTA0MUBpdHUuZWR1LnBrXCIsXHJcbiAgICBcInN0YXR1c1wiOiBcIm9uIGRhIHdheVwiLFxyXG4gICAgXCJhbW91bnRcIjogXCIyMDAwMFwiLFxyXG4gICAgXCJkYXRlXCI6XCIxMi00LTIyXCIsXHJcbiAgICBcIndyYXBcIjp0cnVlLFxyXG4gICAgXCJjYXJkXCI6dHJ1ZSxcclxuICAgIFwiaXRlbXNcIjogW3tcIm5hbWVcIjpcIkFpciBLaW5nXCIsXCJRVFlcIjpcIjFcIixcIkNvbG9yXCI6XCJCbHVlXCJ9XVxyXG59fVxyXG4qL1xyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSxyZXMpe1xyXG4gICAgY29uc29sZS5sb2coXCJpbiBoYW5kbGVyXCIpXHJcbiAgICBpZiAocmVxLm1ldGhvZD09PSdQT1NUJyl7XHJcbiAgICAgICAgaWYoIXJlcS5ib2R5KXtyZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe2Vycm9yOidObyBkYXRhJ30pfVxyXG4gICAgICAgIGNvbnN0e2VtYWlsfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgICAgICBjb25zdCBuZXdPcmRlciA9IGF3YWl0IGdldE9yZGVycyhlbWFpbCk7XHJcblxyXG4gICAgICAgIGlmICghbmV3T3JkZXIpe1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7bWVzc2FnZTonRXJyb3IgaW4gZ2V0dGluZyBhbGwgb3JkZXJzJ30pXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgaW4gZ2V0dGluZyBhbGwgb3JkZXJzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwibmV3IE9yZGVyLFwiLEpTT04uc3RyaW5naWZ5KG5ld09yZGVyKSk7XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcIm9yZGVyc1wiOm5ld09yZGVyfSk7XHJcblxyXG4gICAgICAgXHJcbiAgICB9ICAgXHJcbiAgICBlbHNle1xyXG4gICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe21lc3NhZ2U6J01ldGhvZCBFcnJvcid9KVxyXG5cclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJnZXRPcmRlcnMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsIm1ldGhvZCIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJlbWFpbCIsIm5ld09yZGVyIiwibWVzc2FnZSIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/Orders/getOrders.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/Orders/getOrders.js"));
module.exports = __webpack_exports__;

})();